{% load tailwind_tags %}
{% load static %}

<!DOCTYPE html>
<html lang="fr" class="h-full">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}Ping FFTT Manager{% endblock %}</title>
  {% tailwind_css %}

  {% block extra_head %}{% endblock %}

</head>

<body class="min-h-screen flex flex-col bg-white text-slate-900 dark:bg-slate-900 dark:text-slate-100">
  <!-- Lien dâ€™Ã©vitement -->
  <a href="#main" class="sr-only focus:not-sr-only focus:fixed focus:top-2 focus:left-2
              px-3 py-2 rounded-lg bg-amber-400 text-black font-medium shadow">
    Aller au contenu
  </a>

  <header class="sticky top-0 z-40 border-b border-slate-200 bg-white/95 backdrop-blur
               dark:bg-slate-900/90 dark:border-slate-700 dark:text-slate-100">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between gap-6">
      <h1 class="text-lg sm:text-xl font-semibold tracking-tight">
        ğŸ“ Ping FFTT Manager
      </h1>
      <nav aria-label="principal" class="flex items-center gap-3 text-sm text-slate-700 dark:text-slate-300">
        <a href="{% url 'home' %}"
           class="font-medium text-sky-800 hover:text-sky-900 underline-offset-4 hover:underline focus:outline-none focus-visible:ring focus-visible:ring-amber-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:text-sky-300 dark:hover:text-sky-200 dark:focus-visible:ring-offset-slate-900 rounded-lg px-2 py-1">
          Accueil
        </a>
        <button id="themeToggle" type="button"
                class="px-3 py-1.5 rounded-lg text-sm font-medium bg-slate-100 hover:bg-slate-200 text-slate-900 focus:outline-none focus-visible:ring focus-visible:ring-amber-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white
                               dark:bg-slate-800 dark:text-slate-100 dark:hover:bg-slate-700 dark:focus-visible:ring-offset-slate-900">
          ğŸŒ™ Sombre
        </button>
      </nav>
    </div>
  </header>

  <main id="main" class="flex-grow max-w-7xl mx-auto px-4 py-6 w-full">
    {% block content %}{% endblock %}
  </main>

  <footer class="mt-auto border-t border-slate-200 py-6 text-sm text-slate-600
               dark:border-slate-700 dark:text-slate-300 text-center">
    <div class="max-w-7xl mx-auto px-4">
      <p>Â© {{ now|default:"" }} Ping FFTT</p>
    </div>
  </footer>

  <script>
    // Au chargement : prÃ©fÃ©rer le choix mÃ©morisÃ©, sinon rÃ©glage systÃ¨me et synchroniser le libellÃ© du bouton
    (function () {
      const saved = localStorage.getItem('theme');         // 'dark' | 'light' | null
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const el = document.documentElement;
      const initialDark = saved === 'dark' || (!saved && prefersDark);
      if (initialDark) el.classList.add('dark');
      const toggle = document.getElementById('themeToggle');
      if (toggle) toggle.textContent = initialDark ? 'â˜€ï¸ Clair' : 'ğŸŒ™ Sombre';
    })();

    // Toggle on click
    document.getElementById('themeToggle')?.addEventListener('click', function () {
      const el = document.documentElement;
      const isDark = el.classList.toggle('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      this.textContent = isDark ? 'â˜€ï¸ Clair' : 'ğŸŒ™ Sombre';
    });
  </script>

</body>

</html>
